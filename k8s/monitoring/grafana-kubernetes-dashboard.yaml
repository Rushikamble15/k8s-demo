apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-kubernetes-dashboard
data:
  dashboards.yaml: |
    apiVersion: 1
    providers:
    - name: 'Kubernetes Dashboards'
      orgId: 1
      folder: 'Kubernetes'
      type: file
      disableDeletion: false
      editable: true
      options:
        path: /var/lib/grafana/dashboards

  kubernetes-dashboard.json: |
    {
      "annotations": {},
      "editable": true,
      "gnetId": 15661,
      "graphTooltip": 0,
      "id": null,
      "links": [],
      "panels": [],
      "schemaVersion": 27,
      "style": "dark",
      "tags": ["kubernetes"],
      "templating": {
        "list": [
          {
            "allValue": null,
            "current": {},
            "datasource": "Prometheus",
            "definition": "label_values(kube_node_info, node)",
            "description": null,
            "error": null,
            "hide": 0,
            "includeAll": false,
            "label": null,
            "multi": false,
            "name": "node",
            "options": [],
            "query": {
              "query": "label_values(kube_node_info, node)",
              "refId": "StandardVariableQuery"
            },
            "refresh": 1,
            "regex": "",
            "skipUrlSync": false,
            "sort": 1,
            "type": "query"
          }
        ]
      },
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Kubernetes / Nodes",
      "uid": "kubernetes-nodes-dashboard",
      "version": 1
    }
